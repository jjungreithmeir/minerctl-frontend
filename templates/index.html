<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0" />
  <link href="{{ url_for('static',filename='css/materialize.css') }}" type="text/css" rel="stylesheet" media="screen,projection" />
  <link href="{{ url_for('static',filename='css/util.css') }}" type="text/css" rel="stylesheet" media="screen,projection" />
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <title> bitTex mmc </title>
</head>

<body>
  <nav>
    <div class="nav-wrapper">
      <a href="/" class="brand-logo m-l-10">bitTex Mining Monitoring & Controlling</a>

      <div class="float-right">

        <div class="input-field float-left m-r-20">
          <select class="font-white" id="cont-select">
            <option value="" disabled selected> Choose a container</option>
            {% for cont in container %}
              <option value="{{ cont }}"> Container {{ cont }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="m-r-10 flex">
          <a class="m-r-20" href="/settings">
            <i class="material-icons">build</i>
          </a>
          <a href="/logout">
            <i class="material-icons">exit_to_app</i>
          </a>
      </div>
    </div>
  </nav>

  <div class="row m-t-10">
    {% for key, value in data.items() %}
      <div class="col 1">
        <div class="card">
          <div class="card-content">
            <span class="card-title"> {{key}} </span>
            <p> {{value}} </p>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>

  <div class="row">
    {% for miner in container[0] %}
      <div class="col col-custom">
        <div class="card" id="miner{{miner}}">
          <a class='dropdown-trigger color-grey' href='#' data-target='minerConfig{{miner}}'>
            <i class="material-icons float-right m-2">settings</i>
          </a>

          <ul id='minerConfig{{miner}}' class='dropdown-content'>
            <li class="dropdown-title font-bold">Miner #{{ miner }}</li>
            <li><a href="#!">ON</a></li>
            <li><a href="#!" onclick="disable('#miner{{miner}}')">OFF</a></li>
            <li class="divider" tabindex="-1"></li>
            <li><a href="#!">RESET</a></li>
          </ul>

          <div class="card-content">
            <p>#{{ miner }} </p>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>

  <div id="cancel" class="modal">
    <div class="modal-content">
      <h4> Miner # </h4>
      <a href="#!" class="modal-close btn-flat">ON</a>
      <a href="#!" class="modal-close btn-flat">OFF</a>
      <a href="#!" class="modal-close btn-flat">RESET</a>
    </div>
  </div>

  <!-- TODO finish easter egg
  <div>
    <img class="fan-logo rotate image-above" src="static/images/fans.png">
    <img class="fan-logo image-below" src="static/images/casing.png">
  </div>
-->

  <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script type="text/javascript" src="static/js/materialize.min.js"></script>
  <script type="text/javascript">
    /*
    $(document).ready(function() {
      $('ul.tabs').tabs();
    });
    */
    $(document).ready(function(){
      $('select').formSelect();
    });
    /*
    $(document).ready(function(){
      $('.modal').modal();
    });
    */
    $('.dropdown-trigger').dropdown();
    function disable(id) {
      $(id).addClass('disabled-miner')
    }
  </script>
</body>

</html>
